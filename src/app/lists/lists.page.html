<ion-header [translucent]="true">
	<ion-toolbar>
		<ion-title>
			Lists
		</ion-title>
	</ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
	<ion-header collapse="condense">
		<ion-toolbar>
			<ion-title size="large">Lists</ion-title>
		</ion-toolbar>
	</ion-header>

	<ion-fab vertical="top" horizontal="end" slot="fixed"> 
		<ion-fab-button id="open-modal" color="dark">
		  	<ion-icon name="add"></ion-icon>
		</ion-fab-button>
	</ion-fab>

	<ion-card *ngFor="let list of lists" (click)="setOpen(true, list)">
		<ion-card-header>
		  	<ion-card-subtitle>0 tasks</ion-card-subtitle>
		  	<ion-card-title>{{list.name}}</ion-card-title>
			  
		</ion-card-header>
	  
		<ion-card-content>
			<ion-item lines="none">
				<ion-button color="light" slot="end" (click)="$event.stopPropagation(); deleteList(list)"><ion-icon name="trash-outline"></ion-icon></ion-button>
			</ion-item>
		</ion-card-content>
	</ion-card>
</ion-content>

<ion-modal trigger="open-modal">
	<ng-template>
		<ion-header collapse="condense">
			<ion-toolbar class="safearea-ios">
				<ion-title size="large">Add List</ion-title>
				<ion-buttons slot="end">
					<ion-button color="dark" (click)="close()">
						<ion-icon name="close-outline"></ion-icon>
					</ion-button>
				</ion-buttons>
			</ion-toolbar>
		</ion-header>
		<ion-content [formGroup]="addListForm" class="ion-padding">
			<ion-item>
				<ion-label position="floating">Name</ion-label>
				<ion-input formControlName="name"></ion-input>
			</ion-item>
			<ion-item lines="none"></ion-item>
			<ion-button expand="block" (click)="addList()">Save</ion-button>
		</ion-content>
	</ng-template>
</ion-modal>

<ion-modal [isOpen]="isTasksOpen">
    <ng-template>
		<ion-header collapse="condense">
			<ion-toolbar class="safearea-ios">
				<ion-title size="large">{{(currentList | async)?.name}}</ion-title>
				<ion-buttons slot="end">
					<ion-button color="dark" (click)="setOpen(false, null)">
						<ion-icon name="close-outline"></ion-icon>
					</ion-button>
				</ion-buttons>
			</ion-toolbar>
		</ion-header>
		<ion-content class="ion-padding">
			<tasks [tasks]="tasks" [tasksCollection]="tasksCollection"></tasks>
			<ion-button expand="block" color="dark" (click)="addTask()">Add Task</ion-button>
		</ion-content>
    </ng-template>
</ion-modal>